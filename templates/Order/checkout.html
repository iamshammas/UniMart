{% extends 'base.html' %}

{% block title %}Checkout{% endblock %}

{% block content %}

<div class="container">

    <h2 class="mb-4">Checkout</h2>

    {% if cart_items %}

        <div class="alert alert-info">
            <strong>Total Payable:</strong> â‚¹ {{ cart_tot }}
        </div>

        <hr>

        <h4 class="mb-3">Shipping Details</h4>

        <form method="post" class="card p-4 shadow-sm">
            {% csrf_token %}

            <div class="mb-3">
                <label class="form-label">Name</label>
                <input 
                    type="text" 
                    name="name" 
                    value="{{ cart.user.username }}" 
                    class="form-control"
                    required
                >
            </div>

            <div class="mb-3">
                <label class="form-label">Phone</label>
                <input 
                    type="text" 
                    name="phone" 
                    value="{{ cart.user.profile.phone }}" 
                    class="form-control"
                    required
                >
            </div>

            <div class="mb-3">
                <label class="form-label">Address</label>
                <textarea 
                    name="address" 
                    rows="3" 
                    class="form-control"
                    required
                >{{ cart.user.profile.address }}</textarea>
            </div>

            <hr>

            <h4 class="mb-3">Payment Method</h4>

            <div class="form-check">
                <input 
                    class="form-check-input" 
                    type="radio" 
                    name="payment_method" 
                    value="COD" 
                    id="cod"
                    checked
                >
                <label class="form-check-label" for="cod">
                    Cash on Delivery
                </label>
            </div>

            <div class="d-flex justify-content-end mt-4">
                <button type="submit" class="btn btn-success btn-lg">
                    Place Order
                </button>
            </div>

        </form>

    {% else %}

        <div class="alert alert-warning mt-4">
            Your cart is empty.
        </div>

        <a href="/" class="btn btn-primary">Continue Shopping</a>

    {% endif %}

</div>

{% endblock %}
